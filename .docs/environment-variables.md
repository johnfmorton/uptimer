# Environment Variables Reference

This document provides a complete reference for all environment variables used in the uptime monitoring application.

## Application Settings

### APP_NAME
- **Description**: The name of your application
- **Default**: `"Uptime Monitor"`
- **Example**: `APP_NAME="My Uptime Monitor"`
- **Required**: Yes

### APP_ENV
- **Description**: The application environment
- **Values**: `local`, `staging`, `production`
- **Default**: `local`
- **Example**: `APP_ENV=production`
- **Required**: Yes

### APP_KEY
- **Description**: Application encryption key (generated automatically)
- **Format**: `base64:...`
- **Example**: `APP_KEY=base64:abc123...`
- **Required**: Yes
- **Note**: Generated by `php artisan key:generate`

### APP_DEBUG
- **Description**: Enable debug mode (shows detailed errors)
- **Values**: `true`, `false`
- **Default**: `true` (local), `false` (production)
- **Example**: `APP_DEBUG=false`
- **Required**: Yes
- **Warning**: Always set to `false` in production

### APP_URL
- **Description**: The base URL of your application
- **Example**: `APP_URL=https://monitor.example.com`
- **Required**: Yes
- **Note**: Used for generating links in emails and notifications

## Database Configuration

### DB_CONNECTION
- **Description**: Database driver to use
- **Values**: `sqlite`, `mysql`, `pgsql`, `sqlsrv`
- **Default**: `sqlite`
- **Example**: `DB_CONNECTION=mysql`
- **Required**: Yes

### DB_HOST
- **Description**: Database server hostname
- **Default**: `127.0.0.1` (MySQL), `db` (DDEV)
- **Example**: `DB_HOST=db`
- **Required**: Yes (for MySQL, PostgreSQL)
- **Note**: Not used for SQLite

### DB_PORT
- **Description**: Database server port
- **Default**: `3306` (MySQL), `5432` (PostgreSQL)
- **Example**: `DB_PORT=3306`
- **Required**: Yes (for MySQL, PostgreSQL)
- **Note**: Not used for SQLite

### DB_DATABASE
- **Description**: Database name or file path
- **Default**: `database/database.sqlite` (SQLite), `db` (DDEV MySQL)
- **Example**: `DB_DATABASE=uptime_monitor`
- **Required**: Yes

### DB_USERNAME
- **Description**: Database username
- **Default**: `root` (MySQL), `db` (DDEV)
- **Example**: `DB_USERNAME=db`
- **Required**: Yes (for MySQL, PostgreSQL)
- **Note**: Not used for SQLite

### DB_PASSWORD
- **Description**: Database password
- **Default**: Empty (MySQL), `db` (DDEV)
- **Example**: `DB_PASSWORD=secret`
- **Required**: Yes (for MySQL, PostgreSQL)
- **Note**: Not used for SQLite

## Queue Configuration

### QUEUE_CONNECTION
- **Description**: Queue driver to use
- **Values**: `sync`, `database`, `redis`, `sqs`, `beanstalkd`
- **Default**: `database`
- **Example**: `QUEUE_CONNECTION=database`
- **Required**: Yes
- **Note**: Use `database` for simplicity, `redis` for production scale

## Cache Configuration

### CACHE_DRIVER
- **Description**: Cache driver to use
- **Values**: `file`, `database`, `redis`, `memcached`, `array`
- **Default**: `file`
- **Example**: `CACHE_DRIVER=redis`
- **Required**: Yes

### CACHE_PREFIX
- **Description**: Prefix for cache keys
- **Default**: Application name slug
- **Example**: `CACHE_PREFIX=uptime_monitor_cache`
- **Required**: No

## Session Configuration

### SESSION_DRIVER
- **Description**: Session storage driver
- **Values**: `file`, `cookie`, `database`, `redis`, `memcached`, `array`
- **Default**: `file`
- **Example**: `SESSION_DRIVER=database`
- **Required**: Yes

### SESSION_LIFETIME
- **Description**: Session lifetime in minutes
- **Default**: `120`
- **Example**: `SESSION_LIFETIME=1440`
- **Required**: Yes

## Mail Configuration

### MAIL_MAILER
- **Description**: Mail driver to use
- **Values**: `smtp`, `sendmail`, `mailgun`, `ses`, `postmark`, `log`, `array`
- **Default**: `smtp`
- **Example**: `MAIL_MAILER=smtp`
- **Required**: Yes

### MAIL_HOST
- **Description**: SMTP server hostname
- **Example**: `MAIL_HOST=smtp.mailtrap.io`
- **Required**: Yes (for SMTP)

### MAIL_PORT
- **Description**: SMTP server port
- **Common Values**: `25`, `465` (SSL), `587` (TLS), `2525` (Mailtrap)
- **Example**: `MAIL_PORT=587`
- **Required**: Yes (for SMTP)

### MAIL_USERNAME
- **Description**: SMTP authentication username
- **Example**: `MAIL_USERNAME=your-username`
- **Required**: Yes (for SMTP with auth)

### MAIL_PASSWORD
- **Description**: SMTP authentication password
- **Example**: `MAIL_PASSWORD=your-password`
- **Required**: Yes (for SMTP with auth)
- **Security**: Keep this secret, never commit to version control

### MAIL_ENCRYPTION
- **Description**: SMTP encryption method
- **Values**: `tls`, `ssl`, `null`
- **Default**: `tls`
- **Example**: `MAIL_ENCRYPTION=tls`
- **Required**: Yes (for SMTP)

### MAIL_FROM_ADDRESS
- **Description**: Default sender email address
- **Example**: `MAIL_FROM_ADDRESS="noreply@example.com"`
- **Required**: Yes

### MAIL_FROM_NAME
- **Description**: Default sender name
- **Example**: `MAIL_FROM_NAME="${APP_NAME}"`
- **Required**: Yes

## Mailgun Configuration (Optional)

### MAILGUN_DOMAIN
- **Description**: Your Mailgun domain
- **Example**: `MAILGUN_DOMAIN=mg.example.com`
- **Required**: Yes (if using Mailgun)

### MAILGUN_SECRET
- **Description**: Your Mailgun API key
- **Example**: `MAILGUN_SECRET=key-abc123...`
- **Required**: Yes (if using Mailgun)
- **Security**: Keep this secret

### MAILGUN_ENDPOINT
- **Description**: Mailgun API endpoint
- **Default**: `api.mailgun.net`
- **Example**: `MAILGUN_ENDPOINT=api.eu.mailgun.net`
- **Required**: No

## Pushover Configuration (Optional)

### PUSHOVER_USER_KEY
- **Description**: Your Pushover user key
- **Format**: 30-character alphanumeric string
- **Example**: `PUSHOVER_USER_KEY=abc123def456ghi789jkl012`
- **Required**: Yes (if using Pushover)
- **Where to find**: Pushover dashboard at <https://pushover.net>

### PUSHOVER_API_TOKEN
- **Description**: Your Pushover application API token
- **Format**: 30-character alphanumeric string
- **Example**: `PUSHOVER_API_TOKEN=xyz789uvw456rst123opq012`
- **Required**: Yes (if using Pushover)
- **Where to find**: Create an application at <https://pushover.net/apps>

## HTTP Check Configuration

### CHECK_TIMEOUT
- **Description**: Timeout for HTTP checks in seconds
- **Default**: `30`
- **Range**: `1` to `300` (5 minutes)
- **Example**: `CHECK_TIMEOUT=30`
- **Required**: No
- **Note**: Checks exceeding this timeout are marked as failed

## Logging Configuration

### LOG_CHANNEL
- **Description**: Default log channel
- **Values**: `stack`, `single`, `daily`, `slack`, `syslog`, `errorlog`
- **Default**: `stack`
- **Example**: `LOG_CHANNEL=daily`
- **Required**: Yes

### LOG_LEVEL
- **Description**: Minimum log level to record
- **Values**: `debug`, `info`, `notice`, `warning`, `error`, `critical`, `alert`, `emergency`
- **Default**: `debug`
- **Example**: `LOG_LEVEL=warning`
- **Required**: Yes

## Example Configurations

### Development (DDEV + SQLite + Mailtrap)

```env
APP_NAME="Uptime Monitor"
APP_ENV=local
APP_DEBUG=true
APP_URL=https://kiro-laravel-ddev-skeleton-template.ddev.site

DB_CONNECTION=sqlite

QUEUE_CONNECTION=database

MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=your-mailtrap-username
MAIL_PASSWORD=your-mailtrap-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@example.com"
MAIL_FROM_NAME="${APP_NAME}"

CHECK_TIMEOUT=30
```

### Production (MySQL + Mailgun + Pushover)

```env
APP_NAME="Uptime Monitor"
APP_ENV=production
APP_DEBUG=false
APP_URL=https://monitor.example.com

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=uptime_monitor
DB_USERNAME=uptime_user
DB_PASSWORD=secure-password-here

QUEUE_CONNECTION=redis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

CACHE_DRIVER=redis
SESSION_DRIVER=redis

MAIL_MAILER=mailgun
MAILGUN_DOMAIN=mg.example.com
MAILGUN_SECRET=key-abc123...
MAIL_FROM_ADDRESS="noreply@example.com"
MAIL_FROM_NAME="${APP_NAME}"

PUSHOVER_USER_KEY=abc123def456ghi789jkl012
PUSHOVER_API_TOKEN=xyz789uvw456rst123opq012

CHECK_TIMEOUT=30

LOG_CHANNEL=daily
LOG_LEVEL=warning
```

### Staging (MySQL + Gmail)

```env
APP_NAME="Uptime Monitor (Staging)"
APP_ENV=staging
APP_DEBUG=true
APP_URL=https://staging-monitor.example.com

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=uptime_monitor_staging
DB_USERNAME=staging_user
DB_PASSWORD=staging-password

QUEUE_CONNECTION=database

MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="your-email@gmail.com"
MAIL_FROM_NAME="${APP_NAME}"

CHECK_TIMEOUT=30
```

## Security Best Practices

### Sensitive Variables

The following variables contain sensitive information and should never be committed to version control:

- `APP_KEY`
- `DB_PASSWORD`
- `MAIL_PASSWORD`
- `MAILGUN_SECRET`
- `PUSHOVER_USER_KEY`
- `PUSHOVER_API_TOKEN`
- `REDIS_PASSWORD`

### Production Checklist

Before deploying to production, ensure:

- ✅ `APP_ENV=production`
- ✅ `APP_DEBUG=false`
- ✅ `APP_KEY` is generated and unique
- ✅ All passwords are strong and unique
- ✅ Database credentials are secure
- ✅ Mail configuration is tested
- ✅ Pushover credentials are valid (if used)
- ✅ `.env` file has restricted permissions (600 or 640)
- ✅ `.env` is not committed to version control

### File Permissions

Set appropriate permissions on the `.env` file:

```bash
chmod 600 .env
```

Or for shared hosting:

```bash
chmod 640 .env
```

## Troubleshooting

### Variable Not Taking Effect

**Problem:** Changed an environment variable but it's not working.

**Solution:**
1. Clear configuration cache: `ddev artisan config:clear`
2. Restart queue workers if running
3. Restart web server if needed

### Missing Required Variables

**Problem:** Application errors about missing configuration.

**Solution:**
1. Check `.env` file exists
2. Compare with `.env.example`
3. Ensure all required variables are set
4. Run `ddev artisan config:cache` to cache configuration

### Invalid Mail Configuration

**Problem:** Emails not sending.

**Solution:**
1. Verify all `MAIL_*` variables are set correctly
2. Test with `ddev artisan tinker` and `Mail::raw()`
3. Check mail server credentials
4. Review application logs: `ddev artisan pail`

## Additional Resources

- [Setup Guide](setup.md) - Complete installation instructions
- [Usage Guide](usage.md) - How to use the application
- [Laravel Documentation](https://laravel.com/docs) - Framework documentation
